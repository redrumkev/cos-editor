{"id":"cos-editor-2k0","title":"15.2 Sidebar: VS Code-style collapsible sections","description":"Replace tab-based sidebar (Structure/Outline/Changes) with VS Code-style stacked collapsible panels. Within a book: three accordion sections — Dossier (collapsible), Book (collapsible), Telemetry (collapsible). Each independently open/close, multiple open simultaneously. Visual distinction between sections (different colors, accordion folder metaphor). Top-level views remain, with three book sections nested under Explorer/Structure.","notes":"Current sidebar: tab-based (Structure/Outline/Changes) in LeftPane.tsx. StructureTree.tsx renders manuscript.front/body/back.chapters. Migration path: tabs -\u003e collapsible panels is a UI reskin, not architecture change. Data plumbing carries forward. See LAYER_ARCHITECTURE.md L3.5 BOOKSHELF structure for canonical three-section definition.","status":"open","priority":2,"issue_type":"task","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:09:48.998546-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:17:11.981119-05:00","labels":["move-15","ui"],"dependencies":[{"issue_id":"cos-editor-2k0","depends_on_id":"cos-editor-cte","type":"parent-child","created_at":"2026-02-27T12:09:58.527318-05:00","created_by":"Kevin Serra"}]}
{"id":"cos-editor-47f","title":"15.1 Data Model: Redefine front/body/back semantics","description":"Restructure COS manuscript API three sections: front=dossier (research bible, thesis, reader architecture, questions), body=publishable manuscript (all chapters), back=telemetry (resonance frameworks, exemplar pairs, craft metrics — internal only). Migrate 'The Dao of Being' content accordingly. Dossier and telemetry are living workspaces with evolving structure — don't over-constrain schema. Hydration: dossier from agents+L1/L2/L3, telemetry from resonance_lab_db_prod.","notes":"Backend already has: DossierV1 model (book_jsonb.py), book_dossier JSONB column (renamed FROM front_matter), book_accordion JSONB column, ContentManifestV2 with front/body/back sections. COS TelemetryService imports 7 resonance_lab metric functions. ExemplarClient.find_receipts() queries 2925+ cards. Export Projection handles compile-to-PDF/Drive. Canonical spec: ~/dev/NEXUS/vision/cos/cos_editor-spec.md","status":"open","priority":2,"issue_type":"task","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:09:44.730433-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:17:11.870275-05:00","labels":["data-model","move-15"],"dependencies":[{"issue_id":"cos-editor-47f","depends_on_id":"cos-editor-cte","type":"parent-child","created_at":"2026-02-27T12:09:58.410527-05:00","created_by":"Kevin Serra"}]}
{"id":"cos-editor-bga","title":"15.3 Per-book workspace state persistence","description":"Extend Move 14.5 layout persistence to be book-scoped. Current: global state (one lastBookId). Target: per-book state map including which sections open/collapsed, selected chapter, scroll position. Switching books restores each book's last workspace context. Build on existing LayoutStore, key by bookId instead of flat global state.","notes":"Current persistence: LayoutStore in layout-store.ts saves to cos-editor-layout.json with 1s debounce. Fields: leftPaneOpen, captureOpen, activeTab, lastBookId, lastChapterPath. Needs: per-book state map keyed by bookId. WindowStateStore handles window bounds separately.","status":"open","priority":2,"issue_type":"task","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:09:49.752299-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:17:12.109293-05:00","labels":["move-15","persistence"],"dependencies":[{"issue_id":"cos-editor-bga","depends_on_id":"cos-editor-cte","type":"parent-child","created_at":"2026-02-27T12:09:58.643382-05:00","created_by":"Kevin Serra"}]}
{"id":"cos-editor-cte","title":"Move 15: Three-Layer Book Architecture (Dossier / Manuscript / Telemetry)","description":"## Vision\n\nRestructure the editor's three-section model (front/body/back) to reflect the actual creative operating system:\n\n- **Front (Dossier):** The research bible — thesis, reader architecture, question bank, dublin core metadata. Written early, stabilizes over time, becomes a checklist/cross-reference tracker. Agents work FROM the dossier to guide drafting.\n- **Body (Manuscript):** The publishable book — everything from Author's Note through final chapter. What compiles to PDF, gets emailed to an agent, goes to print.  \n- **Back (Telemetry):** Sacred IP, never published. Resonance lab frameworks, exemplar pairs, agent personas, craft metrics, revision experiments. Agents work heavily IN telemetry. Evolves through the full lifecycle: outline → rough draft → draft → revision → publishing perfection.\n\n## Key Architectural Decisions\n\n1. Dossier and telemetry are living workspaces, not fixed containers. Their internal structure will evolve.\n2. Both may become \"summaries with links to depth\" rather than everything inline.\n3. Per-book workspace state: switching books restores which sections were open/collapsed and where you were working.\n4. VS Code-style collapsible sections in the sidebar (not tabs) — dossier, book, telemetry as accordion panels within a book.\n5. Dossier hydrated partially or fully from agents + research + COS data layers (L1/L2/L3).\n6. Telemetry hydrated from resonance_lab (cross-repo calls to resonance_lab_db_prod), publishing agents, exemplar cards.\n7. \"The Dao of Being\" is the test book — written to actually become publishable via the system working as designed.\n\n## Open Questions (to resolve during implementation)\n\n- What exactly renders in the dossier section? Editable forms? Markdown? Structured cards?\n- How does telemetry surface resonance_lab data? Direct DB queries? API? Cached snapshots?\n- How granular is per-book state persistence? Section open/close? Scroll position? Selected telemetry tab?\n- Should dossier/telemetry have their own sub-navigation (like tabs within each section)?\n- What's the migration path for existing front/back content → body?\n\n## Context\n\nMove 14 (Polish + macOS Native Feel) is complete. The editor has design tokens, animations, native menus, state persistence, preview modes, performance hardening, and macOS packaging. This is the next major evolution — making the editor reflect how books are actually built in COS.","status":"open","priority":1,"issue_type":"epic","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:08:53.705753-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:08:53.705753-05:00","labels":["architecture","editor","move-15"]}
{"id":"cos-editor-k1a","title":"15.4 Dossier UI and hydration","description":"Design and implement dossier (front matter) section UI. Contains: Dublin Core metadata, central thesis, reader architecture, question bank (genre Qs, adjacent book Qs, questions nobody asks), transformation approaches, cross-references to manuscript. Written early, stabilizes over time. Hydrated by agents + manual authoring + COS L1/L2/L3. May start as markdown editor, gain structure over iterations. Open: forms vs cards vs markdown?","notes":"Backend has: DossierV1 Pydantic model with dublin_core, dossier (thesis/framework), reader_architecture, questions (core/reddit/competitor_gaps/author_unique), hidden_architecture (seeds/reread_layers/cross_book_threads), quality (checklists/mbq_inventory/facets_matrix). render_dossier() in export_projection/transforms/dossier.py. BOOK_ARCHITECTURE_SYNTHESIS.md has detailed schema sketch. Dossier hydration: agents + L1/L2/L3 data layers.","status":"open","priority":3,"issue_type":"task","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:09:50.474699-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:17:12.228791-05:00","labels":["dossier","move-15"],"dependencies":[{"issue_id":"cos-editor-k1a","depends_on_id":"cos-editor-cte","type":"parent-child","created_at":"2026-02-27T12:09:58.760034-05:00","created_by":"Kevin Serra"}]}
{"id":"cos-editor-kyb","title":"15.6 Body migration and compilation","description":"Migrate existing front/back content into body. Move 'The Dao of Being' Author's Note, Introduction from front to body; Afterword, Further Reading from back to body. Implement compilation: collect all body chapters in order, generate .docx/.pdf/email-ready format. 'The Dao of Being' is the test book (~27,722 words, 12 chapters) — built to become publishable via the system working as designed.","notes":"The Dao of Being test book: 12 chapters, ~27,722 words. Current layout: front (Author's Note, Introduction), body (Ch 1-8), back (Afterword, Further Reading). All content belongs in body. Migration: move front/back chapters to body via manuscript API reorder + section reassignment. Export Projection (L4) already handles compile-to-PDF/Drive/email via ExportProjectionEngine select-\u003ebuild-\u003estage-\u003edeliver pipeline.","status":"open","priority":2,"issue_type":"task","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:09:51.936749-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:17:12.456286-05:00","labels":["migration","move-15"],"dependencies":[{"issue_id":"cos-editor-kyb","depends_on_id":"cos-editor-cte","type":"parent-child","created_at":"2026-02-27T12:09:58.984008-05:00","created_by":"Kevin Serra"}]}
{"id":"cos-editor-r67","title":"15.5 Telemetry UI and resonance_lab integration","description":"Design and implement telemetry (back matter) section UI. Sacred IP, never published. Contains: active resonance frameworks, exemplar pairs from classics, agent personas, craft metrics (bell tones/1K words, FK, pacing), revision experiments. Integrates with resonance_lab (~/dev/resonance_lab) via resonance_lab_db_prod for exemplar cards, frameworks, metrics. Must store snapshots for reproducibility. Evolves through lifecycle: outline to publishing perfection. Kevin's voice primary.","notes":"Backend has: TelemetryService (cos/telemetry/service.py) importing compute_engagement_metrics, compute_readability_metrics, compute_rhythm_metrics, compute_sentence_stats, detect_bell_tones, analyze_memorability, analyze_paradox_architecture from resonance_lab. ExemplarClient.find_receipts() maps telemetry lenses to craft roles. 2925+ exemplar cards in resonance_lab DB. Telemetry schema: traces, evals, experiments, corpus_maps tables. Score + ThesisTree visual tools partially implemented.","status":"open","priority":3,"issue_type":"task","owner":"redrumkev@aol.com","created_at":"2026-02-27T12:09:51.220044-05:00","created_by":"Kevin Serra","updated_at":"2026-02-27T12:17:12.34448-05:00","labels":["move-15","resonance","telemetry"],"dependencies":[{"issue_id":"cos-editor-r67","depends_on_id":"cos-editor-cte","type":"parent-child","created_at":"2026-02-27T12:09:58.873194-05:00","created_by":"Kevin Serra"}]}
